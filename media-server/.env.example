# ====================================
# STREAMLICK MEDIA SERVER CONFIGURATION
# ====================================

# Server Configuration
# --------------------
MEDIA_SERVER_PORT=3001

# Frontend URL (for CORS) - REQUIRED IN PRODUCTION
# Must be the full URL where your frontend is hosted
FRONTEND_URL=https://streamlick.com

# Backend API URL - REQUIRED FOR DAILY.CO INTEGRATION
# URL of the backend API server (for creating Daily rooms and managing streams)
# In production, use your backend API domain
# In development, use http://localhost:3000
BACKEND_API_URL=https://streamlick.com

# Media Server Secret - REQUIRED FOR SERVER-TO-SERVER AUTH
# Shared secret for authenticating media server requests to backend
# Must match MEDIA_SERVER_SECRET in backend .env
MEDIA_SERVER_SECRET=your-secret-key-change-this-in-production

# Streaming Method
# ----------------
# Always 'daily' - FFmpeg has been removed
STREAMING_METHOD=daily

# MediaSoup WebRTC Configuration
# -------------------------------
# REQUIRED: Your server's public IP address (NOT localhost or 127.0.0.1 in production)
# This is announced to WebRTC clients so they can connect to the media server
MEDIASOUP_ANNOUNCED_IP=YOUR_SERVER_PUBLIC_IP

# FFmpeg Deployment Mode
# Set to 'true' if FFmpeg runs on a separate server from mediasoup
# Set to 'false' or leave unset if FFmpeg runs on the same server (default)
# EXTERNAL_FFMPEG=false   # Same server (default) - uses 127.0.0.1
# EXTERNAL_FFMPEG=true    # Different server - uses MEDIASOUP_ANNOUNCED_IP
EXTERNAL_FFMPEG=false

# Number of mediasoup workers to create (minimum 2 for redundancy)
# More workers = better performance for high concurrent streams
MEDIASOUP_WORKERS=2

# UDP port range for WebRTC connections
# Make sure these ports are open in your firewall
# Default range (40000-40100) supports ~100 concurrent connections per worker
MEDIASOUP_RTC_MIN_PORT=40000
MEDIASOUP_RTC_MAX_PORT=40100

# Redis Configuration
# --------------------
# Required for session management and pub/sub
REDIS_URL=redis://localhost:6379

# Environment & Logging
# ----------------------
NODE_ENV=production
LOG_LEVEL=info

# ====================================
# EXAMPLE DEVELOPMENT CONFIGURATION
# ====================================
# MEDIA_SERVER_PORT=3001
# FRONTEND_URL=http://localhost:3002
# BACKEND_API_URL=http://localhost:3000
# STREAMING_METHOD=daily
# MEDIASOUP_ANNOUNCED_IP=127.0.0.1
# MEDIASOUP_WORKERS=2
# MEDIASOUP_RTC_MIN_PORT=40000
# MEDIASOUP_RTC_MAX_PORT=40100
# REDIS_URL=redis://localhost:6379
# NODE_ENV=development
# LOG_LEVEL=debug
